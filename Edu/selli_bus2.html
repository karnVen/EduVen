<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minimalistic Chat Interface</title>
<link rel="stylesheet" href="home2.css">
<link rel="stylesheet" href="nav.css">
<link rel="stylesheet" href="sellibus.css">

</head>
<body>

<header>
  <nav>
    <a href="home2.html" >HOME</a>
        <a href="community2.html" >COMMUNITY</a>
        <a href="selli_bus2.html" >NCERT</a>
        <a href="notyet.html" >GAMES</a>
  </nav>
</header>

<div style="margin-right:50%;" id="chatContainer">
  <div id="messages" role="log" aria-live="polite" aria-relevant="additions"></div>
  <form id="inputForm" aria-label="Send a message">
    <input
      type="text"
      id="inputField"
      placeholder="Type your message here..."
      autocomplete="off"
      required
      aria-required="true"
    />
    <button type="submit" id="sendButton" aria-label="Send message">Send</button>
  </form>

  
   <spline-viewer class="robot-3d" style="padding-left: 20% ;" url="https://prod.spline.design/w-uWdAP7sdLSmknH/scene.splinecode"></spline-viewer>
    
   
</div>

 </div>
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.10.57/build/spline-viewer.js"></script>

<script>
  const messages = document.getElementById('messages');
  const inputForm = document.getElementById('inputForm');
  const inputField = document.getElementById('inputField');
  const sendButton = document.getElementById('sendButton');
  const sessionKey = Math.random().toString(36).substring(2, 15);

  function addMessage(content, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message ' + sender;
    messageDiv.textContent = content;
    messages.appendChild(messageDiv);
    messages.scrollTop = messages.scrollHeight;
  }

  inputForm.addEventListener('submit', function (event) {
    event.preventDefault();
    const text = inputField.value.trim();
    if (!text) return;

    addMessage(text, 'user');
    inputField.value = '';
    inputField.disabled = true;
    sendButton.disabled = true;

    const webhookUrl = 'http://localhost:5678/webhook/520ebc9d-b14b-40a7-8645-17c494165dab';
    const data = { sessionKey, data: text };

    fetch(webhookUrl, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data),
    })
      .then((response) => response.json())
      .then((responseData) => {
        addMessage(responseData.output || 'No response', 'bot');
      })
      .catch((err) => {
        addMessage('Error: ' + err.message, 'bot');
      })
      .finally(() => {
        inputField.disabled = false;
        sendButton.disabled = false;
        inputField.focus();
      });
  });

  inputField.focus();
</script>

</body>
</html>
