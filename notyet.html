<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <title>Minimal Webhook Client</title>
</head>
<link rel="stylesheet" href="nav.css" />
<body>

     <header>
      <nav>
        <a href="home2.html">HOME</a>
        <a href="community2.html">COMMUNITY</a>
        <a href="selli_bus2.html">NCERT</a>
        <a href="notyet.html">GAMES</a>
      </nav>
    </header>


 <form id="webhookForm">
 <input type="text" id="inputField" placeholder="Enter text here" required />
 <br />
 <button type="submit">Submit</button>
 </form>
 <br />
 

 <script>
 const sessionKey = Math.random().toString(36).substring(2, 15);

 document.getElementById("webhookForm").addEventListener("submit", function (event) {
 event.preventDefault();

 const inputValue = document.getElementById("inputField").value;

 const webhookUrl = "http://localhost:5678/webhook/627523b7-99fe-4999-88cd-7605c47db00b";

 const data = {
 sessionKey: sessionKey,
 data: inputValue,
 };

      fetch(webhookUrl, {
 method: "POST",
 headers: {
  "Content-Type": "application/json",
 },
 body: JSON.stringify(data),
 })
 .then((response) => response.json())
 .then((responseData) => {
  const blob = new Blob([responseData.output], { type: "text/html" });
  const url = URL.createObjectURL(blob);
  // Replace current page with fetched HTML
  window.location.href = url;

  // Optional: Show message if navigation fails (usually won't reach here)
  const responseArea = document.getElementById("responseArea");
  responseArea.textContent = "Loading fetched HTML...";
 })
 .catch((error) => {
  console.error("Error fetching webhook:", error);
  const responseArea = document.getElementById("responseArea");
  responseArea.textContent = "Failed to fetch the page. See console for details.";
 });
 });
 </script>
</body>
</html>
